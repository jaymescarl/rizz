-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

-- Create Frame
local frame = Instance.new("Frame")
frame.Parent = screenGui
frame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
frame.Size = UDim2.new(0, 300, 0, 300) -- Initial size
frame.Position = UDim2.new(0.5, -150, 0.5, -150) -- Centered on screen
frame.Active = true
frame.Draggable = false -- Disable dragging for the whole frame

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = frame
statusLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.Size = UDim2.new(1, 0, 0, 30)
statusLabel.Position = UDim2.new(0, 0, 0, -40)
statusLabel.Text = "Status: Normal Speed (1)"
statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
statusLabel.TextScaled = true

-- Create Speed Input Field Function
local function createInputField(parent, posXScale, posYScale, defaultText)
    local input = Instance.new("TextBox")
    input.Parent = parent
    input.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    input.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
    input.Position = UDim2.new(posXScale, 0, posYScale, 0) -- Relative position
    input.Text = defaultText
    input.TextScaled = true
    input.PlaceholderText = "Enter Speed"
    return input
end

-- Create Normal Speed Button
local normalButton = Instance.new("TextButton")
normalButton.Parent = frame
normalButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
normalButton.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
normalButton.Position = UDim2.new(0.1, 0, 0.1, 0) -- Relative position
normalButton.Text = "Normal Speed (1)"
normalButton.TextScaled = true

-- Create SlowMo Speed Button and Input
local slowMoButton = Instance.new("TextButton")
slowMoButton.Parent = frame
slowMoButton.BackgroundColor3 = Color3.fromRGB(100, 149, 237)  -- Cornflower blue
slowMoButton.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
slowMoButton.Position = UDim2.new(0.1, 0, 0.2, 0) -- Relative position
slowMoButton.Text = "SlowMo Speed (0.2)"
slowMoButton.TextScaled = true

local slowMoInput = createInputField(frame, 0.55, 0.2, "0.2")

-- Create Faster Speed Button and Input
local fasterButton = Instance.new("TextButton")
fasterButton.Parent = frame
fasterButton.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
fasterButton.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
fasterButton.Position = UDim2.new(0.1, 0, 0.3, 0) -- Relative position
fasterButton.Text = "Faster Speed (2)"
fasterButton.TextScaled = true

local fasterInput = createInputField(frame, 0.55, 0.3, "2")

-- Create Reverse Speed Button and Input
local reverseButton = Instance.new("TextButton")
reverseButton.Parent = frame
reverseButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
reverseButton.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
reverseButton.Position = UDim2.new(0.1, 0, 0.4, 0) -- Relative position
reverseButton.Text = "Reverse Speed (-0.5)"
reverseButton.TextScaled = true

local reverseInput = createInputField(frame, 0.55, 0.4, "-0.5")

-- Create Custom Speed Button and Input
local customButton = Instance.new("TextButton")
customButton.Parent = frame
customButton.BackgroundColor3 = Color3.fromRGB(255, 255, 0)
customButton.Size = UDim2.new(0.4, 0, 0, 30) -- Relative size
customButton.Position = UDim2.new(0.1, 0, 0.5, 0) -- Relative position
customButton.Text = "Custom Speed (0)"
customButton.TextScaled = true

local customInput = createInputField(frame, 0.55, 0.5, "0")

-- Label for "Script Made by Jay"
local creditsLabel = Instance.new("TextLabel")
creditsLabel.Parent = frame
creditsLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
creditsLabel.Size = UDim2.new(1, 0, 0, 30)
creditsLabel.Position = UDim2.new(0, 0, 0.75, 0) -- Relative position
creditsLabel.Text = "Script made by Jay"
creditsLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
creditsLabel.TextScaled = true

-- Resize Handle
local resizeHandle = Instance.new("Frame")
resizeHandle.Parent = frame
resizeHandle.Size = UDim2.new(0, 20, 0, 20) -- Size of the resize handle
resizeHandle.Position = UDim2.new(1, 0, 1, 0) -- Bottom-right corner
resizeHandle.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Black color
resizeHandle.AnchorPoint = Vector2.new(1, 1)

-- Resize Functionality
local draggingResize = false
local dragStartResize = nil
local startSize = nil

-- Larger hitbox for resizing
resizeHandle.MouseEnter:Connect(function()
    resizeHandle.Size = UDim2.new(0, 40, 0, 40) -- Increase size when hovered
end)

resizeHandle.MouseLeave:Connect(function()
    resizeHandle.Size = UDim2.new(0, 20, 0, 20) -- Reset size when not hovered
end)

resizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        draggingResize = true
        dragStartResize = input.Position
        startSize = frame.Size
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                draggingResize = false
            end
        end)
    end
end)

-- Allow dragging to resize even outside the black box
game:GetService("UserInputService").InputChanged:Connect(function(input)
    if draggingResize and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStartResize
        frame.Size = UDim2.new(startSize.X.Scale, startSize.X.Offset + delta.X, startSize.Y.Scale, startSize.Y.Offset + delta.Y)
        -- Keep the resize handle in the bottom-right corner
        resizeHandle.Position = UDim2.new(1, 0, 1, 0)
    end
end)

-- Dragging Functionality for Frame
local dragging = false
local dragStart = nil
local startPos = nil

frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 and not draggingResize then
        dragging = true
        dragStart = input.Position
        startPos = frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

frame.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Animation Speed Variables
local speedMultiplier = 1

-- Function to modify animation speed
local function modifyAnimationSpeed()
    local character = game.Players.LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            for _, animTrack in pairs(humanoid:GetPlayingAnimationTracks()) do
                animTrack:AdjustSpeed(speedMultiplier)
            end
        end
    end
end

-- Function to update status
local function updateStatus(text, color)
    statusLabel.Text = text
    statusLabel.TextColor3 = color
    modifyAnimationSpeed()
end

-- Button Functions
normalButton.MouseButton1Click:Connect(function()
    speedMultiplier = 1
    updateStatus("Status: Normal Speed (1)", Color3.fromRGB(0, 255, 0))
end)

slowMoButton.MouseButton1Click:Connect(function()
    local enteredSpeed = tonumber(slowMoInput.Text) or 0.2
    speedMultiplier = enteredSpeed
    updateStatus("Status: SlowMo Speed ("..enteredSpeed..")", Color3.fromRGB(100, 149, 237))
end)

fasterButton.MouseButton1Click:Connect(function()
    local enteredSpeed = tonumber(fasterInput.Text) or 2
    if enteredSpeed > 0 then
        speedMultiplier = enteredSpeed
        updateStatus("Status: Faster Speed ("..enteredSpeed..")", Color3.fromRGB(0, 0, 255))
    end
end)

reverseButton.MouseButton1Click:Connect(function()
    local enteredSpeed = tonumber(reverseInput.Text) or -0.5
    if enteredSpeed > 0 then enteredSpeed = -enteredSpeed end -- Ensure reverse is negative
    speedMultiplier = enteredSpeed
    updateStatus("Status: Reverse Speed ("..enteredSpeed..")", Color3.fromRGB(255, 0, 0))
end)

customButton.MouseButton1Click:Connect(function()
    local enteredSpeed = tonumber(customInput.Text) or 0
    speedMultiplier = enteredSpeed
    updateStatus("Status: Custom Speed ("..enteredSpeed..")", Color3.fromRGB(255, 255, 0))
end)

-- Constantly monitor animation and adjust speed to prevent reset
game:GetService("RunService").RenderStepped:Connect(modifyAnimationSpeed)
